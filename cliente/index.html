<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>

    <link href="css/bootstrap.min.css" rel="stylesheet">
    <link href="font-awesome/css/font-awesome.css" rel="stylesheet">

    <link href="css/animate.css" rel="stylesheet">
    <link href="css/style.css" rel="stylesheet">
    <script src="/socket.io/socket.io.js"></script>

    <style>
        form {

            padding: 3rem;
            position: fixed;
            bottom: 0;
            right: 0;
            left: 0;
            display: flex;

        }

        div {}
    </style>

</head>

<body>

    <div class="chat-discussion" style="height: 90%;">

        <div class="chat-message left">
            <img class="message-avatar" src="img/a1.jpg" alt="">
            <div class="message">
                <span class="message-date"> Mon Jan 26 2015 - 18:39:23 </span>
                <span class="message-content">
                    Lorem ipsum dolor sit amet, consectetuer adipiscing elit, sed diam nonummy nibh euismod tincidunt ut
                    laoreet dolore magna aliquam erat volutpat.
                </span>
            </div>
        </div>
        <div class="chat-message right">
            <img class="message-avatar" src="img/a4.jpg" alt="">
            <div class="message">
                <a class="message-author" href="#"> Karl Jordan </a>
                <span class="message-date"> Fri Jan 25 2015 - 11:12:36 </span>
                <span class="message-content">
                    Many desktop publishing packages and web page editors now use Lorem Ipsum as their default model
                    text, and a search for 'lorem ipsum' will uncover.
                </span>
            </div>
        </div>

        <form action="">

            <input type="text" class="form-control" placeholder="Ingrese Mensaje">
            <button class="btn btn-primary">Enviar</button>

        </form>

    </div>

    <script>

        let socket = io()

        // Referenciamos a los elemenos de DOM

        const form = document.querySelector('form')
        const input = document.querySelector('input')
        let mensajes = document.querySelector('div.chat-discussion')

        form.addEventListener('submit', (e) => {

            e.preventDefault()
            if (input.value) {

                socket.emit('chat', input.value)
                input.value = ''

            }

        })

        socket.on('chat', (msg) => {

            let item = document.createElement('div')
            item.className = "chat-message left"
            item.innerHTML = "<img class=" + "'message-avatar'" + "src=" + "'img/a1.jpg' " + "><div class="+"'message'"+">"+"<span class="+"'message-content'"+">"+msg+"</span></div>"
            mensajes.appendChild(item)
            window.scrollTo(0, document.body.scrollHeight)

        })

    </script>

    <script src="js/jquery-2.1.1.js"></script>
    <script src="js/bootstrap.min.js"></script>
    <script src="js/plugins/metisMenu/jquery.metisMenu.js"></script>
    <script src="js/plugins/slimscroll/jquery.slimscroll.min.js"></script>

    <!-- Custom and plugin javascript -->
    <script src="js/inspinia.js"></script>
    <script src="js/plugins/pace/pace.min.js"></script>

    <script src="js/plugins/slimscroll/jquery.slimscroll.min.js"></script>

</body>

</html>